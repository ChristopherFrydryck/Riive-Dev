{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nvar _dec,\n    _class,\n    _class2,\n    _temp,\n    _jsxFileName = \"/Users/christopherfrydryck/Documents/Dev/Riive-Dev/riive/screens/AddVehicle.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Picker from \"react-native-web/dist/exports/Picker\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Input from \"../components/Input\";\nimport Dropdown from \"../components/Dropdown\";\nimport Button from \"../components/Button\";\nimport Colors from \"../constants/Colors\";\nimport axios from 'axios';\nimport * as firebase from 'firebase';\nimport 'firebase/firestore';\nimport firebaseConfig from \"../firebaseConfig\";\nimport { inject, observer } from 'mobx-react/native';\nimport { requireNativeViewManager } from '@unimodules/core';\nimport Cars from \"../constants/CarManufacturers\";\nvar unique = [];\nvar d = new Date();\nvar year = d.getFullYear();\nvar AddVehicle = (_dec = inject(\"UserStore\", \"ComponentStore\"), _dec(_class = observer(_class = (_temp = _class2 = function (_React$Component) {\n  _inherits(AddVehicle, _React$Component);\n\n  var _super = _createSuper(AddVehicle);\n\n  function AddVehicle(props) {\n    var _this;\n\n    _classCallCheck(this, AddVehicle);\n\n    _this = _super.call(this, props);\n    _this._isMounted = false;\n\n    _this.submitVehicle = function _callee() {\n      var db, ref;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              db = firebase.firestore();\n\n              if (!_this._isMounted) {\n                _context.next = 7;\n                break;\n              }\n\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(_this.checkValid());\n\n            case 4:\n              if (_this.state.error.makeValid && _this.state.error.modelValid && _this.state.error.yearValid && _this.state.error.licenseValid) {\n                ref = db.collection(\"users\").doc();\n                db.collection(\"users\").doc(_this.props.UserStore.userID).update({\n                  vehicles: firebase.firestore.FieldValue.arrayUnion({\n                    VehicleID: ref.id,\n                    Year: _this.state.yearSelected,\n                    Make: _this.state.makeSelected,\n                    Model: _this.state.modelSelected,\n                    LicensePlate: _this.state.licensePlateNum,\n                    Color: _this.state.vehicleColor\n                  })\n                });\n\n                _this.props.UserStore.vehicles.push({\n                  VehicleID: ref.id,\n                  Year: _this.state.yearSelected,\n                  Make: _this.state.makeSelected,\n                  Model: _this.state.modelSelected,\n                  LicensePlate: _this.state.licensePlateNum,\n                  Color: _this.state.vehicleColor\n                });\n\n                _this.props.navigation.navigate(\"Profile\");\n              } else {}\n\n              _context.next = 8;\n              break;\n\n            case 7:\n              alert(\"failed to submit vehicle\");\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.checkValid = function () {\n      if (_this.state.yearSelected >= 1900 && _this.state.yearSelected <= year + 1 && _this.state.yearSelected.length == 4) {\n        _this.setState(function (prev) {\n          var error = _objectSpread({}, prev.error);\n\n          error.year = \"\";\n          error.yearValid = true;\n          return {\n            error: error\n          };\n        });\n      } else {\n        _this.setState(function (prev) {\n          var error = _objectSpread({}, prev.error);\n\n          error.year = \"Invalid Year\";\n          error.yearValid = false;\n          return {\n            error: error\n          };\n        });\n      }\n\n      if (_this.state.makeSelected !== \"Choose a Manufacturer...\") {\n        _this.setState(function (prev) {\n          var error = _objectSpread({}, prev.error);\n\n          error.make = \"\";\n          error.makeValid = true;\n          return {\n            error: error\n          };\n        });\n      } else {\n        _this.setState(function (prev) {\n          var error = _objectSpread({}, prev.error);\n\n          error.make = \"Select a make\";\n          error.makeValid = false;\n          return {\n            error: error\n          };\n        });\n      }\n\n      if (_this.state.modelSelected !== \"Car Model...\" && _this.state.modelSelected !== null && _this.state.modelSelected !== \"\" && _this.state.modelSelected !== \" \") {\n        _this.setState(function (prev) {\n          var error = _objectSpread({}, prev.error);\n\n          error.model = \"\";\n          error.modelValid = true;\n          return {\n            error: error\n          };\n        });\n      } else {\n        _this.setState(function (prev) {\n          var error = _objectSpread({}, prev.error);\n\n          error.model = \"Enter a model\";\n          error.modelValid = false;\n          return {\n            error: error\n          };\n        });\n      }\n\n      if (_this.state.licensePlateNum.length >= 1 && _this.state.licensePlateNum !== \" \") {\n        _this.setState(function (prev) {\n          var error = _objectSpread({}, prev.error);\n\n          error.licensePlate = \"\";\n          error.licenseValid = true;\n          return {\n            error: error\n          };\n        });\n      } else {\n        _this.setState(function (prev) {\n          var error = _objectSpread({}, prev.error);\n\n          error.licensePlate = \"Enter a license plate #\";\n          error.licenseValid = false;\n          return {\n            error: error\n          };\n        });\n      }\n    };\n\n    _this.checkYearMake = function () {\n      if (_this.state.yearSelected.length == 4 && _this.state.makeSelected !== \"Choose a Manufacturer...\") {\n        _this.setState({\n          loadingVehicleAPI: true\n        });\n\n        axios.get('https://vpic.nhtsa.dot.gov/api/vehicles/getmodelsformakeyear/make/' + _this.state.makeSelected + '/modelyear/' + _this.state.yearSelected + '/vehicleType/c?format=json').then(function (response) {\n          if (_this._isMounted) {\n            _this.setState({\n              loadingVehicleAPI: false\n            });\n\n            var arr = response.data.Results.filter(function (car) {\n              return car.VehicleTypeId == 2 || car.VehicleTypeId == 3 || car.VehicleTypeId == 7;\n            });\n            unique = arr.filter(function (car, i, u) {\n              return u.findIndex(function (t) {\n                return t.Model_ID === car.Model_ID;\n              }) === i;\n            });\n\n            _this.setState({\n              modelEnabled: true\n            });\n          }\n        }).catch(function (error) {\n          console.log(error);\n        });\n      } else {\n        _this.setState({\n          modelEnabled: false,\n          modelSelected: null\n        });\n      }\n    };\n\n    _this.state = {\n      yearSelected: 0,\n      makeSelected: \"Choose a Manufacturer...\",\n      modelSelected: \"Car Model...\",\n      modelEnabled: false,\n      licensePlateNum: \"\",\n      vehicleColor: \"Black\",\n      loadingVehicleAPI: false,\n      error: {\n        year: \"\",\n        make: \"\",\n        model: \"\",\n        licensePlate: \"\",\n        yearValid: false,\n        makeValid: false,\n        modelValid: false,\n        licenseValid: false\n      },\n      readyToSubmit: false\n    };\n    return _this;\n  }\n\n  _createClass(AddVehicle, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n      this._navListener = this.props.navigation.addListener('didFocus', function () {\n        StatusBar.setBarStyle('dark-content', true);\n        Platform.OS === 'android' && StatusBar.setBackgroundColor('white');\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n\n      this._navListener.remove();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var carObjArray = [];\n\n      for (var i = 0; i < Cars.length; i++) {\n        carObjArray.push({\n          key: i,\n          label: Cars[i]\n        });\n      }\n\n      var colorArray = [\"Black\", \"Blue\", \"Brown\", \"Gray\", \"Green\", \"Orange\", \"Pink\", \"Purple\", \"Red\", \"Silver\", \"Yellow\", \"White\"];\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: {\n          flexDirection: \"row\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 17\n        }\n      }, React.createElement(Input, {\n        flex: 1,\n        onChangeText: function onChangeText(value) {\n          return _this2.setState({\n            yearSelected: value\n          }, function () {\n            _this2.checkYearMake();\n          });\n        },\n        label: \"Year\",\n        placeholder: \"YYYY\",\n        maxLength: 4,\n        error: this.state.error.year,\n        keyboardType: \"numeric\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 21\n        }\n      }), React.createElement(View, {\n        style: {\n          marginLeft: 16,\n          flex: 3\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 21\n        }\n      }, React.createElement(Dropdown, {\n        selectedValue: this.state.makeSelected,\n        label: \"Make\",\n        error: this.state.error.make,\n        style: {\n          height: 28\n        },\n        onValueChange: Platform.OS === \"ios\" ? function (value) {\n          return _this2.setState({\n            makeSelected: value.label\n          }, function () {\n            _this2.checkYearMake();\n          });\n        } : function (value) {\n          return _this2.setState({\n            makeSelected: value\n          }, function () {\n            _this2.checkYearMake();\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 25\n        }\n      }, Platform.OS === \"android\" ? carObjArray.map(function (carMake) {\n        return React.createElement(Picker.Item, {\n          label: carMake.label,\n          value: carMake.label,\n          key: carMake.key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 44\n          }\n        });\n      }) : carObjArray))), React.createElement(View, {\n        style: {\n          flexDirection: \"row\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 17\n        }\n      }, this.state.loadingVehicleAPI ? React.createElement(View, {\n        style: {\n          flex: 1,\n          justifyContent: \"center\",\n          alignContent: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 49\n        }\n      }, React.createElement(ActivityIndicator, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 123\n        }\n      })) : null, unique.length > 0 ? React.createElement(View, {\n        style: {\n          flex: 11\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 17\n        }\n      }, React.createElement(Dropdown, {\n        enabled: this.state.modelEnabled,\n        selectedValue: this.state.modelSelected,\n        label: \"Model\",\n        style: {\n          height: 28\n        },\n        error: this.state.error.model,\n        onValueChange: Platform.OS === \"ios\" ? function (value) {\n          return _this2.setState({\n            modelSelected: value.label\n          });\n        } : function (value) {\n          return _this2.setState({\n            modelSelected: value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 21\n        }\n      }, Platform.OS === \"android\" ? unique.map(function (carModel) {\n        return React.createElement(Picker.Item, {\n          label: carModel.Model_Name,\n          value: carModel.Model_Name,\n          key: carModel.Model_ID,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 40\n          }\n        });\n      }) : unique.map(function (carModel) {\n        return {\n          label: carModel.Model_Name,\n          key: carModel.Model_ID\n        };\n      }))) : React.createElement(View, {\n        style: {\n          flex: 11\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 26\n        }\n      }, React.createElement(Input, {\n        editable: this.state.modelEnabled,\n        onChangeText: function onChangeText(value) {\n          return _this2.setState({\n            modelSelected: value\n          });\n        },\n        label: \"Model\",\n        placeholder: \"Car Model...\",\n        maxLength: 30,\n        error: this.state.error.model,\n        keyboardType: \"default\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 29\n        }\n      }))), React.createElement(View, {\n        style: {\n          flexDirection: \"row\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 2\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 21\n        }\n      }, React.createElement(Input, {\n        autoCapitalize: \"characters\",\n        onChangeText: function onChangeText(value) {\n          return _this2.setState({\n            licensePlateNum: value\n          });\n        },\n        label: \"License Plate\",\n        placeholder: \"XXX-1234\",\n        maxLength: 8,\n        error: this.state.error.licensePlate,\n        keyboardType: \"default\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 21\n        }\n      })), React.createElement(View, {\n        style: {\n          marginLeft: 16,\n          flex: 2\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 25\n        }\n      }, React.createElement(Dropdown, {\n        flex: 2,\n        selectedValue: this.state.vehicleColor,\n        label: \"Color\",\n        style: {\n          height: 28\n        },\n        onValueChange: Platform.OS === \"ios\" ? function (value) {\n          return _this2.setState({\n            vehicleColor: value.label\n          });\n        } : function (value) {\n          return _this2.setState({\n            vehicleColor: value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 29\n        }\n      }, Platform.OS === \"android\" ? colorArray.map(function (res, i) {\n        return React.createElement(Picker.Item, {\n          key: i,\n          label: res,\n          value: res,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 44\n          }\n        });\n      }) : colorArray.map(function (res, i) {\n        return {\n          label: res,\n          key: i\n        };\n      })))), React.createElement(Button, {\n        style: {\n          backgroundColor: Colors.tango900\n        },\n        textStyle: {\n          color: 'white'\n        },\n        onPress: function onPress() {\n          return _this2.submitVehicle();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 17\n        }\n      }, \"Save Vehicle\"));\n    }\n  }]);\n\n  return AddVehicle;\n}(React.Component), _class2.navigationOptions = {\n  title: \"Add A Vehicle\",\n  headerTitleStyle: {\n    fontWeight: \"300\",\n    fontSize: 18\n  }\n}, _temp)) || _class) || _class);\nvar styles = StyleSheet.create({\n  container: {\n    padding: 20,\n    justifyContent: 'center'\n  }\n});\nexport default AddVehicle;","map":{"version":3,"sources":["/Users/christopherfrydryck/Documents/Dev/Riive-Dev/riive/screens/AddVehicle.js"],"names":["React","Input","Dropdown","Button","Colors","axios","firebase","firebaseConfig","inject","observer","requireNativeViewManager","Cars","unique","d","Date","year","getFullYear","AddVehicle","props","_isMounted","submitVehicle","db","firestore","checkValid","state","error","makeValid","modelValid","yearValid","licenseValid","ref","collection","doc","UserStore","userID","update","vehicles","FieldValue","arrayUnion","VehicleID","id","Year","yearSelected","Make","makeSelected","Model","modelSelected","LicensePlate","licensePlateNum","Color","vehicleColor","push","navigation","navigate","alert","length","setState","prev","make","model","licensePlate","checkYearMake","loadingVehicleAPI","get","then","response","arr","data","Results","filter","car","VehicleTypeId","i","u","findIndex","t","Model_ID","modelEnabled","catch","console","log","readyToSubmit","_navListener","addListener","StatusBar","setBarStyle","Platform","OS","setBackgroundColor","remove","carObjArray","key","label","colorArray","styles","container","flexDirection","value","marginLeft","flex","height","map","carMake","justifyContent","alignContent","carModel","Model_Name","res","backgroundColor","tango900","color","Component","navigationOptions","title","headerTitleStyle","fontWeight","fontSize","StyleSheet","create","padding"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport { View, Text, Picker, StatusBar, StyleSheet, ActivityIndicator, Platform} from 'react-native'\r\nimport Input from '../components/Input'\r\nimport Dropdown from '../components/Dropdown'\r\nimport Button from '../components/Button'\r\nimport Colors from '../constants/Colors'\r\nimport axios from 'axios'\r\n\r\nimport * as firebase from 'firebase'\r\nimport 'firebase/firestore';\r\nimport firebaseConfig from '../firebaseConfig'\r\n\r\n//MobX Imports\r\nimport {inject, observer} from 'mobx-react/native'\r\nimport { requireNativeViewManager } from '@unimodules/core';\r\n\r\nimport Cars from '../constants/CarManufacturers'\r\n\r\n\r\n\r\nvar unique = []\r\nvar d = new Date();\r\nconst year = d.getFullYear();\r\n\r\n\r\n@inject(\"UserStore\", \"ComponentStore\")\r\n@observer\r\nclass AddVehicle extends React.Component{\r\n    _isMounted = false;\r\n\r\n    static navigationOptions = {\r\n        title: \"Add A Vehicle\",\r\n        headerTitleStyle:{\r\n            fontWeight: \"300\",\r\n            fontSize: 18,\r\n        }\r\n    \r\n    };\r\n\r\n    \r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            yearSelected: 0,\r\n            makeSelected: \"Choose a Manufacturer...\",\r\n            modelSelected: \"Car Model...\",\r\n            modelEnabled: false,\r\n            licensePlateNum: \"\",\r\n            vehicleColor: \"Black\",\r\n            loadingVehicleAPI: false,\r\n            error: {\r\n                year: \"\",\r\n                make: \"\",\r\n                model: \"\",\r\n                licensePlate: \"\",\r\n                yearValid: false,\r\n                makeValid: false,\r\n                modelValid: false,\r\n                licenseValid: false,\r\n            },\r\n            readyToSubmit: false,\r\n        }\r\n\r\n        \r\n\r\n    \r\n\r\n        \r\n    }\r\n\r\n    submitVehicle = async () => {\r\n        const db = firebase.firestore();\r\n\r\n        if(this._isMounted){\r\n\r\n        await this.checkValid();\r\n        if(this.state.error.makeValid && \r\n            this.state.error.modelValid &&\r\n            this.state.error.yearValid &&\r\n            this.state.error.licenseValid){\r\n                const ref = db.collection(\"users\").doc(); // creates unique ID\r\n                // add vehicle to database\r\n                db.collection(\"users\").doc(this.props.UserStore.userID).update({\r\n                    vehicles: firebase.firestore.FieldValue.arrayUnion({\r\n                        VehicleID: ref.id,\r\n                        Year: this.state.yearSelected,\r\n                        Make: this.state.makeSelected,\r\n                        Model: this.state.modelSelected,\r\n                        LicensePlate: this.state.licensePlateNum,\r\n                        Color: this.state.vehicleColor\r\n                    })\r\n                 })\r\n                 // add vehicle to mobx UserStore\r\n                 this.props.UserStore.vehicles.push({\r\n                    VehicleID: ref.id,\r\n                    Year: this.state.yearSelected,\r\n                    Make: this.state.makeSelected,\r\n                    Model: this.state.modelSelected,\r\n                    LicensePlate: this.state.licensePlateNum,\r\n                    Color: this.state.vehicleColor\r\n                 })\r\n\r\n                 // navigate back to profile\r\n                this.props.navigation.navigate(\"Profile\")\r\n                 \r\n        }else{\r\n            \r\n        }\r\n        }else{\r\n            alert(\"failed to submit vehicle\")\r\n        }\r\n       \r\n    }\r\n\r\n    checkValid = () => {\r\n\r\n    \r\n        \r\n\r\n        // Check if year is valid between 1900 and current year + 1\r\n        if (this.state.yearSelected >= 1900 &&\r\n            this.state.yearSelected <= (year + 1) &&\r\n            this.state.yearSelected.length == 4 \r\n            ){\r\n                this.setState(prev => {\r\n                    const error = {...prev.error};\r\n                    error.year = \"\";\r\n                    error.yearValid = true;\r\n                    return { error }\r\n                })\r\n        }else{\r\n            this.setState(prev => {\r\n                const error = {...prev.error};\r\n                error.year = \"Invalid Year\";\r\n                error.yearValid = false;\r\n                return { error }\r\n            })\r\n            }\r\n\r\n\r\n        // Check if make is selected    \r\n        if(this.state.makeSelected !== \"Choose a Manufacturer...\"){\r\n            this.setState(prev => {\r\n                const error = {...prev.error};\r\n                error.make = \"\";\r\n                error.makeValid = true;\r\n                return { error }\r\n            })\r\n        }else{\r\n            this.setState(prev => {\r\n                const error = {...prev.error};\r\n                error.make = \"Select a make\";\r\n                error.makeValid = false;\r\n                return { error }\r\n            })\r\n        }\r\n\r\n\r\n        // Check if model is either selected or typed in\r\n        if(\r\n            this.state.modelSelected !== \"Car Model...\" &&\r\n            this.state.modelSelected !== null &&\r\n            this.state.modelSelected !== \"\" &&\r\n            this.state.modelSelected !== \" \" ){\r\n                this.setState(prev => {\r\n                    const error = {...prev.error};\r\n                    error.model = \"\";\r\n                    error.modelValid = true;\r\n                    return { error }\r\n                })\r\n        }else{\r\n            this.setState(prev => {\r\n                const error = {...prev.error};\r\n                error.model = \"Enter a model\";\r\n                error.modelValid = false;\r\n                return { error }\r\n            })\r\n        }\r\n\r\n\r\n        // Check that a value is given to license plate\r\n        if(this.state.licensePlateNum.length >= 1 &&\r\n            this.state.licensePlateNum !== \" \"){\r\n            this.setState(prev => {\r\n                const error = {...prev.error};\r\n                error.licensePlate = \"\";\r\n                error.licenseValid = true;\r\n                return { error }\r\n            })\r\n        }else{\r\n            this.setState(prev => {\r\n                const error = {...prev.error};\r\n                error.licensePlate = \"Enter a license plate #\";\r\n                error.licenseValid = false;\r\n                return { error }\r\n            })\r\n        }\r\n\r\n       \r\n\r\n        // console.log(\"year valid: \" + this.state.error.yearValid)\r\n        // console.log(\"make valid: \" + this.state.error.makeValid)\r\n        // console.log(\"model valid: \" + this.state.error.modelValid)\r\n        // console.log(\"license valid: \" + this.state.error.licenseValid)\r\n        // console.log(\" \")\r\n\r\n            \r\n    }\r\n\r\n    checkYearMake = () => {\r\n       \r\n        if (this.state.yearSelected.length == 4\r\n            && this.state.makeSelected !== \"Choose a Manufacturer...\"){\r\n                this.setState({loadingVehicleAPI: true})\r\n                axios.get('https://vpic.nhtsa.dot.gov/api/vehicles/getmodelsformakeyear/make/' + this.state.makeSelected + '/modelyear/' + this.state.yearSelected + '/vehicleType/c?format=json')\r\n                .then(response => {\r\n                    if (this._isMounted){\r\n                        this.setState({loadingVehicleAPI: false})\r\n                        var arr = response.data.Results.filter(function(car){\r\n                            return (car.VehicleTypeId == 2 ||\r\n                                    car.VehicleTypeId == 3 ||\r\n                                    car.VehicleTypeId == 7\r\n                            )\r\n                        });\r\n                        unique = arr.filter((car, i, u) => u.findIndex(t=>(t.Model_ID === car.Model_ID)) === i)\r\n\r\n                        // console.log(unique)\r\n                        this.setState({modelEnabled: true})\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.log(error);\r\n                });\r\n\r\n                \r\n        }else{\r\n            this.setState({modelEnabled: false, modelSelected: null})\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this._isMounted = true;\r\n        \r\n         // Set Status Bar page info here!\r\n       this._navListener = this.props.navigation.addListener('didFocus', () => {\r\n        StatusBar.setBarStyle('dark-content', true);\r\n        Platform.OS === 'android' && StatusBar.setBackgroundColor('white');\r\n      });\r\n       \r\n    }\r\n\r\n    componentWillUnmount(){\r\n        this._isMounted = false;\r\n\r\n         // Unmount status bar info\r\n         this._navListener.remove();\r\n    }\r\n    \r\n\r\n    render(){\r\n        var carObjArray = []\r\n            for(var i = 0; i < Cars.length; i++){\r\n                carObjArray.push({key: i, label:Cars[i], });\r\n            }\r\n        var colorArray = [\"Black\", \r\n                      \"Blue\", \r\n                      \"Brown\", \r\n                      \"Gray\", \r\n                      \"Green\", \r\n                      \"Orange\", \r\n                      \"Pink\", \r\n                      \"Purple\",\r\n                      \"Red\",\r\n                      \"Silver\",\r\n                      \"Yellow\",\r\n                      \"White\"]\r\n\r\n\r\n        \r\n        return(\r\n            <View style={styles.container}>\r\n                <View style={{flexDirection: \"row\" }}>\r\n                    <Input \r\n                        flex= {1}\r\n                        onChangeText = {(value) => this.setState({yearSelected: value}, () => {this.checkYearMake()})}\r\n                        label=\"Year\"\r\n                        placeholder=\"YYYY\"\r\n                        maxLength={4}\r\n                        error={this.state.error.year}\r\n                        keyboardType=\"numeric\"\r\n                    />\r\n                    <View style={{marginLeft: 16, flex: 3}}>\r\n                        <Dropdown\r\n                            selectedValue = {this.state.makeSelected}\r\n                            label=\"Make\"\r\n                            error={this.state.error.make}\r\n                            style={{height: 28}}\r\n                            onValueChange = {Platform.OS === \"ios\" ? (value) => this.setState({makeSelected: value.label}, () => {this.checkYearMake()}) \r\n                                                                   : (value) => this.setState({makeSelected: value}, () => {this.checkYearMake()})}   \r\n                        >\r\n                            {Platform.OS === \"android\" ?\r\n                                carObjArray.map((carMake) => {\r\n                                    return(<Picker.Item label={carMake.label} value={carMake.label} key={carMake.key}/>)\r\n                                })\r\n                            : carObjArray}\r\n                         </Dropdown>\r\n                   \r\n                    </View>\r\n\r\n                    \r\n                \r\n                </View>\r\n                <View style={{flexDirection: \"row\"}}>\r\n                {this.state.loadingVehicleAPI ? <View style={{flex: 1, justifyContent: \"center\", alignContent: \"center\"}}><ActivityIndicator /></View> : null}\r\n                { unique.length > 0 ?\r\n                <View style={{flex: 11}}>\r\n                    <Dropdown\r\n                        enabled={this.state.modelEnabled}\r\n                        selectedValue = {this.state.modelSelected}\r\n                        label=\"Model\"\r\n                        style={{height: 28}}\r\n                        error={this.state.error.model}\r\n                        onValueChange = {Platform.OS === \"ios\" ? (value) => this.setState({modelSelected: value.label}) \r\n                                                               : (value) => this.setState({modelSelected: value})}                \r\n                    >\r\n                        {Platform.OS === \"android\" ?\r\n                            unique.map((carModel) => {\r\n                                return(<Picker.Item label={carModel.Model_Name} value={carModel.Model_Name} key={carModel.Model_ID}/>)\r\n                            })\r\n                            : unique.map((carModel) => {\r\n                                return({label: carModel.Model_Name, key: carModel.Model_ID})\r\n                            })}           \r\n                       \r\n                    </Dropdown>\r\n                </View>\r\n                         :\r\n                         <View style={{flex: 11}}>\r\n                            <Input \r\n                            editable={this.state.modelEnabled}\r\n                            onChangeText = {(value) => this.setState({modelSelected: value})}\r\n                            label=\"Model\"\r\n                            placeholder=\"Car Model...\"\r\n                            maxLength={30}\r\n                            error={this.state.error.model}\r\n                            keyboardType=\"default\"/>\r\n                        </View>\r\n                }\r\n                </View>\r\n                <View style={{flexDirection: \"row\" }}>\r\n                    <View style={{flex: 2}}>\r\n                    <Input \r\n                            autoCapitalize = \"characters\"\r\n                            onChangeText = {(value) => this.setState({licensePlateNum: value})}\r\n                            label=\"License Plate\"\r\n                            placeholder=\"XXX-1234\"\r\n                            maxLength={8}\r\n                            error={this.state.error.licensePlate}\r\n                            keyboardType=\"default\"/>\r\n                    </View>\r\n                        <View style={{marginLeft: 16, flex: 2}}>\r\n                            <Dropdown\r\n                                flex = {2}\r\n                                selectedValue = {this.state.vehicleColor}\r\n                                label=\"Color\"\r\n                                style={{height: 28}}\r\n                                onValueChange = {Platform.OS === \"ios\" ? (value) => this.setState({vehicleColor: value.label}) \r\n                                                                       : (value) => this.setState({vehicleColor: value})}                  \r\n                            >\r\n                            { Platform.OS === \"android\" ? \r\n                                colorArray.map((res, i) => {\r\n                                    return(<Picker.Item key={i} label={res} value={res}/>)\r\n                                })\r\n                                : colorArray.map((res, i) => {\r\n                                    return({label: res, key: i})\r\n                                })}                \r\n                            </Dropdown> \r\n                            \r\n                        </View>  \r\n                </View> \r\n                <Button style={{backgroundColor: Colors.tango900}} textStyle={{color: 'white'}} onPress={() => this.submitVehicle()}>Save Vehicle</Button>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container:{\r\n        // flex: 1,\r\n        // only use for emulator\r\n        // marginTop: getStatusBarHeight(),\r\n        padding: 20,\r\n        justifyContent: 'center',\r\n        // flexDirection: 'row'\r\n    }\r\n})\r\n\r\n\r\n\r\n\r\n\r\nexport default AddVehicle"]},"metadata":{},"sourceType":"module"}